
[{"content":"Feel free to take a look around.\n","date":"30 December 2025","externalUrl":null,"permalink":"/","section":"","summary":"","title":"","type":"page"},{"content":"","date":"30 December 2025","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","date":"30 December 2025","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"30 December 2025","externalUrl":null,"permalink":"/tags/devops/","section":"Tags","summary":"","title":"DevOps","type":"tags"},{"content":"","date":"30 December 2025","externalUrl":null,"permalink":"/categories/infrastructure/","section":"Categories","summary":"","title":"Infrastructure","type":"categories"},{"content":"","date":"30 December 2025","externalUrl":null,"permalink":"/authors/leonardo-neves/","section":"Authors","summary":"","title":"Leonardo Neves","type":"authors"},{"content":"","date":"30 December 2025","externalUrl":null,"permalink":"/tags/linux/","section":"Tags","summary":"","title":"Linux","type":"tags"},{"content":"","date":"30 December 2025","externalUrl":null,"permalink":"/tags/nixos/","section":"Tags","summary":"","title":"NixOS","type":"tags"},{"content":"","date":"30 December 2025","externalUrl":null,"permalink":"/projects/","section":"Projects","summary":"","title":"Projects","type":"projects"},{"content":"","date":"30 December 2025","externalUrl":null,"permalink":"/tags/self-hosting/","section":"Tags","summary":"","title":"Self-Hosting","type":"tags"},{"content":"","date":"30 December 2025","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":" IMPORTANT NOTE # This article is not real, its just an ai generated article to see how it looks, i havent actually made any posts yet\nIntroduction üîé # For years, my server management strategy was \u0026ldquo;SSH in and hope I remember what I changed.\u0026rdquo; This inevitably led to the classic \u0026ldquo;it works on my machine but not the VPS\u0026rdquo; syndrome.\nEnter NixOS.\nUnlike traditional distributions, NixOS is built on a functional deployment model where the entire system state is described in a single configuration file. If it\u0026rsquo;s not in the config, it doesn\u0026rsquo;t exist. This post documents my journey of moving this website from a standard Ubuntu stack to a fully reproducible NixOS VPS.\nThe entire configuration can be found in my github Deployment ‚úà # Provisioning the VPS # To deploy the configuration to my remote VPS, I use nixos-rebuild with a remote target. This allows me to keep my configuration files locally, version-controlled in Git, and push changes securely over SSH.\nThe command I use to deploy changes is:\nnixos-rebuild switch --flake .#my-vps --target-host my-user@vps-ip --use-remote-sudo In case you are doing the initial installation, ensure your SSH keys are correctly added to the configuration.nix file, or you will be locked out immediately after the first reboot! Rollback Strategy # One of the \u0026ldquo;superpowers\u0026rdquo; of NixOS is the ability to undo a broken deployment instantly. If a website update fails or a service doesn\u0026rsquo;t start, I simply run:\nnixos-rebuild switch --rollback NixOS creates a new generation for every change, making rollbacks atomic and instant. How to use ‚ùî # Because the system is declarative, adding a new service (like a database or a reverse proxy) doesn\u0026rsquo;t require manual installation via apt or yum. You simply add the module to your configuration.nix.\nEdit your configuration file locally. Define the service (e.g., services.nginx.enable = true;). Run the rebuild command targeting the remote host. Warning: Manually editing files in /etc/ is a thing of the past. Any changes made outside of the Nix configuration will be wiped on the next rebuild. Development üõ† # The following sections break down how I structured the Nix expression for this website.\nThe Web Server Module # I use Nginx combined with ACME (Let\u0026rsquo;s Encrypt) for automated SSL certificates. Here is the snippet from my webserver.nix module:\nservices.nginx = { enable = true; virtualHosts.\u0026#34;mysite.com\u0026#34; = { forceSSL = true; enableACME = true; root = \u0026#34;/var/www/my-website/public\u0026#34;; }; }; security.acme = { acceptTerms = true; defaults.email = \u0026#34;admin@mysite.com\u0026#34;; }; Nginx is enabled as a systemd service. The virtualHost block handles the domain configuration. forceSSL automatically redirects HTTP to HTTPS. enableACME handles certificate generation and renewal automatically. Flakes Integration # To ensure reproducibility across my local machine and the VPS, I opted for Nix Flakes. This locks the versions of Nixpkgs so that the environment is identical regardless of when or where it is built.\nHere is a simplified flake.nix:\n{ description = \u0026#34;My Website Infrastructure Flake\u0026#34;; inputs = { nixpkgs.url = \u0026#34;github:nixos/nixpkgs/nixos-24.11\u0026#34;; }; outputs = { self, nixpkgs }: { nixosConfigurations.my-vps = nixpkgs.lib.nixosSystem { system = \u0026#34;x86_64-linux\u0026#34;; modules = [ ./configuration.nix ]; }; }; } Inputs define the exact commit of nixpkgs to use. Outputs define the resulting system configuration. This ensures that nixos-rebuild always uses the exact same package versions. Automated Backups # Finally, I\u0026rsquo;ve integrated Restic for encrypted, off-site backups, configured entirely through Nix.\nThe backup runs every night at 3 AM. It targets specific folders defined in the config. It automatically prunes old snapshots to save space. ","date":"30 December 2025","externalUrl":null,"permalink":"/projects/nixos-config/","section":"Projects","summary":"Documenting my transition to NixOS","title":"The NixOS Journey: From Chaos to Declarative Peace","type":"projects"},{"content":"","date":"29 December 2025","externalUrl":null,"permalink":"/categories/aboutme/","section":"Categories","summary":"","title":"Aboutme","type":"categories"},{"content":"","date":"29 December 2025","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","date":"29 December 2025","externalUrl":null,"permalink":"/tags/thoughts/","section":"Tags","summary":"","title":"Thoughts","type":"tags"},{"content":" Who am I # My name is Leonardo Neves and I am studying Computer Science at Instituto Superior T√©cnico.\nYou can find/contact me on github and LinkedIn through the appointed buttons.\nWhat is this blog about # \u0026hellip;\n","date":"29 December 2025","externalUrl":null,"permalink":"/posts/welcome/","section":"Posts","summary":"A few words about me","title":"Welcome","type":"posts"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"}]